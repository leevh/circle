# Docker and Docker Compose based environment for Drupal.
# See https://github.com/blinkreaction/drude for more information and documentation.

# Web node
web:
  extends:
    file: .drude/drude-services.yml
    service: web
  links:
    - cli
  environment:
    - DOMAIN_NAME=web.circle.docker
    - VIRTUAL_HOST=circle.drude

# CLI node
cli:
  extends:
    file: .drude/drude-services.yml
    service: cli
  links:
    - db
  environment:
    - DOMAIN_NAME=cli.circle.docker

# DB node
db:
  extends:
    file: .drude/drude-services.yml
    service: db
  environment:
    - DOMAIN_NAME=db.circle.docker

# Varnish node
#varnish:
#  extends:
#    file: .drude/drude-services.yml
#    service: varnish
#  environment:
#    - VARNISH_BACKEND_HOST=web.circle.docker
#    - VIRTUAL_HOST=varnish.circle.drude